<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc; background-color: #171818}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc; background-color: #171818; min-height: 16.0px}
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!doctype html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html lang="ja" class="h-full"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â </span>&lt;head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;meta charset="UTF-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;title&gt;CAREER QUEST - ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆRPG&lt;/title&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;script src="/_sdk/data_sdk.js"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;script src="/_sdk/element_sdk.js"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>body {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>box-sizing: border-box;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>#app-container {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>width: 100%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>height: 100%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>margin: 0 auto;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>max-width: 480px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>@keyframes fadeIn {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>from { opacity: 0; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>to { opacity: 1; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>@keyframes slideUp {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>from { opacity: 0; transform: translateY(30px); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>to { opacity: 1; transform: translateY(0); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>@keyframes glow {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>0%, 100% { box-shadow: 0 0 15px rgba(102, 126, 234, 0.5); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>50% { box-shadow: 0 0 30px rgba(102, 126, 234, 0.8); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>@keyframes shake {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>0%, 100% { transform: translateX(0); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>25% { transform: translateX(-10px); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>75% { transform: translateX(10px); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>@keyframes shatter {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>0% { opacity: 1; transform: scale(1); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>100% { opacity: 0; transform: scale(1.5) rotate(20deg); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>@keyframes pulse {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>0%, 100% { transform: scale(1); opacity: 1; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>50% { transform: scale(1.05); opacity: 0.8; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>@keyframes sparkle {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>0%, 100% { opacity: 0.3; transform: scale(0.8) rotate(0deg); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>50% { opacity: 1; transform: scale(1.2) rotate(180deg); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>@keyframes attackForward {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>0% { transform: translateX(0) scale(1); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>50% { transform: translateX(-30px) scale(1.15); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>100% { transform: translateX(0) scale(1); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>@keyframes damaged {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>0% { transform: translateX(0) rotate(0deg); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>25% { transform: translateX(15px) rotate(5deg); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>50% { transform: translateX(-15px) rotate(-5deg); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>75% { transform: translateX(10px) rotate(3deg); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>100% { transform: translateX(0) rotate(0deg); }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.fade-in {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>animation: fadeIn 0.8s ease-out;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.slide-up {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>animation: slideUp 0.6s ease-out;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.glow-effect {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>animation: glow 2s infinite;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.shake-effect {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>animation: shake 0.5s ease-out;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.attack-effect {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>animation: attackForward 0.4s ease-out;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.damage-effect {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>animation: damaged 0.6s ease-out;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.shatter-effect {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>animation: shatter 0.8s ease-out forwards;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.pulse-effect {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>animation: pulse 2s infinite;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.sparkle-effect {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>animation: sparkle 2s infinite;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.gradient-text {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>-webkit-background-clip: text;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>-webkit-text-fill-color: transparent;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>background-clip: text;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.dialogue-box {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>background: rgba(22, 33, 62, 0.95);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>backdrop-filter: blur(10px);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>border: 2px solid rgba(102, 126, 234, 0.3);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.skill-card {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>transition: all 0.3s ease;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>position: relative;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>overflow: hidden;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.skill-card:hover {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>transform: translateY(-5px);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.skill-card.locked {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>opacity: 0.5;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>filter: grayscale(0.8);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.skill-tier-1 { border-left: 4px solid #10b981; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.skill-tier-2 { border-left: 4px solid #3b82f6; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.skill-tier-3 { border-left: 4px solid #8b5cf6; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.skill-tier-4 { border-left: 4px solid #f59e0b; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.skill-tier-5 { border-left: 4px solid #ef4444; }</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.choice-button {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>transition: all 0.2s ease;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>cursor: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>user-select: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>-webkit-tap-highlight-color: transparent;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.choice-button:hover:not(:disabled) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>transform: scale(1.05);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>filter: brightness(1.1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.choice-button:active:not(:disabled) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>transform: scale(0.95);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.choice-button:disabled {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>opacity: 0.5;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>cursor: not-allowed;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>#skill-scroll-container::-webkit-scrollbar {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>display: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.skill-card-btn:active {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>transform: scale(0.95);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>.skill-card-btn:disabled {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>opacity: 0.5;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>pointer-events: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;/style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;style&gt;@view-transition { navigation: auto; }&lt;/style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â </span>&lt;/head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â </span>&lt;body class="h-full"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;div id="app-container" class="h-full w-full overflow-hidden"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  </span>&lt;div id="app" class="h-full w-full relative"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const defaultConfig = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>background_color: "#0f0f23",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>surface_color: "#16213e",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>text_color: "#eef1ff",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>primary_action_color: "#667eea",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>secondary_action_color: "#764ba2",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>font_family: "Noto Sans JP",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>font_size: 18,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>main_title: "CAREER QUEST",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>subtitle: "ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆRPG",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>tagline: "å¯¾è©±ãŒä¸–ç•Œã‚’å¤‰ãˆã‚‹",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>start_button: "ã¯ã˜ã‚ã‚‹",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>choice_empathy: "å…±æ„Ÿã™ã‚‹",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>choice_insight: "å•ã„ã‚’æŠ•ã’ã‚‹",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>choice_reframe: "è¦–ç‚¹ã‚’å¤‰ãˆã‚‹"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const skillDatabase = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// Lv1-20: åˆç´šãƒ»åˆ†ææ”»æ’ƒæœŸ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>lifeline_slash: { id: 'lifeline_slash', name: 'ãƒ©ã‚¤ãƒ•ãƒ©ã‚¤ãƒ³ãƒ»ã‚¹ãƒ©ãƒƒã‚·ãƒ¥', level: 1, tier: 1, type: 'empathy', icon: 'âš”ï¸', damage: 25, effect: 'å¼±ç‚¹å±æ€§ã‚’å¯è¦–åŒ–', description: 'éå»ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ–¬ã‚Šã€æ•µã®å¼±ç‚¹ã‚’æš´ã', soundType: 'attack' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>will_burst: { id: 'will_burst', name: 'ã‚¦ã‚£ãƒ«ãƒ»ãƒãƒ¼ã‚¹ãƒˆ', level: 2, tier: 1, type: 'insight', icon: 'ğŸ’¥', damage: 20, effect: 'æ„æ¬²ãƒ€ãƒ¡ãƒ¼ã‚¸', description: 'æ„æ¬²ã®åŠ›ã§å°ãƒ€ãƒ¡ãƒ¼ã‚¸', soundType: 'magic' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>can_shield: { id: 'can_shield', name: 'ã‚­ãƒ£ãƒ³ãƒ»ã‚·ãƒ¼ãƒ«ãƒ‰', level: 3, tier: 1, type: 'empathy', icon: 'ğŸ›¡ï¸', damage: 0, effect: 'è‡ªä¿¡ãƒãƒªã‚¢å±•é–‹', description: 'æ¬¡ã‚¿ãƒ¼ãƒ³ã®ãƒ€ãƒ¡ãƒ¼ã‚¸è»½æ¸›', soundType: 'defense' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>must_pressure: { id: 'must_pressure', name: 'ãƒã‚¹ãƒˆãƒ»ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼', level: 4, tier: 1, type: 'insight', icon: 'âš¡', damage: 30, effect: 'ç¾©å‹™ä¾å­˜ã®æ•µã«è¿½åŠ ãƒ€ãƒ¡ãƒ¼ã‚¸', description: 'ã€Œã€œã™ã¹ãã€æ€è€ƒã‚’æ’ƒã¤', soundType: 'attack' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>wcm_triple: { id: 'wcm_triple', name: 'WCMä¸‰é€£æ’ƒ', level: 5, tier: 1, type: 'reframe', icon: 'ğŸ¯', damage: 45, effect: 'ãƒãƒ©ãƒ³ã‚¹å‹3é€£ç¶šæ”»æ’ƒ', description: 'Will-Can-Must ã‚’çµ±åˆ', soundType: 'attack' },</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>resume_shield: { id: 'resume_shield', name: 'å±¥æ­´æ›¸ã‚·ãƒ¼ãƒ«ãƒ‰', level: 6, tier: 1, type: 'empathy', icon: 'ğŸ“„', damage: 0, effect: 'ä»–è€…è©•ä¾¡ãƒ€ãƒ¡ãƒ¼ã‚¸è»½æ¸›', description: 'å®Ÿç¸¾ã§è‡ªå·±ã‚’å®ˆã‚‹', soundType: 'defense' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>intro_strike: { id: 'intro_strike', name: 'è‡ªå·±ç´¹ä»‹ã®å…ˆåˆ¶æ”»æ’ƒ', level: 7, tier: 1, type: 'insight', icon: 'ğŸ‘‹', damage: 35, effect: 'åˆæœŸãƒãƒ•ç²å¾—', description: 'å¯¾è©±ã®ä¸»å°æ¨©ã‚’æ¡ã‚‹', soundType: 'attack' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>listening_stance: { id: 'listening_stance', name: 'å‚¾è´ã®æ§‹ãˆ', level: 8, tier: 1, type: 'empathy', icon: 'ğŸ‘‚', damage: 0, effect: 'ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ç‡ä¸Šæ˜‡', description: 'ç›¸æ‰‹ã®è¨€è‘‰ã‚’å—ã‘æ­¢ã‚ã‚‹', soundType: 'defense' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>question_arrow: { id: 'question_arrow', name: 'è³ªå•ã®çŸ¢', level: 9, tier: 1, type: 'insight', icon: 'ğŸ¹', damage: 28, effect: 'æ€è€ƒãƒ­ãƒƒã‚¯è§£é™¤', description: 'å•ã„ã§å›ºå®šè¦³å¿µã‚’ç •ã', soundType: 'attack' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>deep_drill: { id: 'deep_drill', name: 'æ·±æ˜ã‚Šãƒ‰ãƒªãƒ«', level: 10, tier: 1, type: 'insight', icon: 'ğŸ”¨', damage: 40, effect: 'å¼±ç‚¹å€ç‡UP', description: 'æ ¸å¿ƒã¾ã§æ˜ã‚Šä¸‹ã’ã‚‹', soundType: 'attack' },</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>career_anchor: { id: 'career_anchor', name: 'ã‚­ãƒ£ãƒªã‚¢ãƒ»ã‚¢ãƒ³ã‚«ãƒ¼', level: 11, tier: 1, type: 'reframe', icon: 'âš“', damage: 30, effect: 'è¡Œå‹•ä¸èƒ½ä»˜ä¸', description: 'ä¾¡å€¤è¦³ã®éŒ¨ã§æ•µã‚’å›ºå®š', soundType: 'magic' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>value_sort: { id: 'value_sort', name: 'ä¾¡å€¤è¦³ã®é¸åˆ¥', level: 12, tier: 1, type: 'reframe', icon: 'ğŸ´', damage: 35, effect: 'ãƒãƒ•è§£é™¤', description: 'å„ªå…ˆé †ä½ã‚’æ•´ç†ã™ã‚‹', soundType: 'magic' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>job_card_log: { id: 'job_card_log', name: 'ã‚¸ãƒ§ãƒ–ãƒ»ã‚«ãƒ¼ãƒ‰è¨˜éŒ²', level: 13, tier: 1, type: 'insight', icon: 'ğŸ“', damage: 25, effect: 'ãƒ­ã‚°ç²å¾—ï¼ˆåˆ†æç²¾åº¦UPï¼‰', description: 'çµŒé¨“ã‚’è¨˜éŒ²ã—å¯è¦–åŒ–', soundType: 'magic' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>skillset_check: { id: 'skillset_check', name: 'ã‚¹ã‚­ãƒ«ã‚»ãƒƒãƒˆç‚¹æ¤œ', level: 14, tier: 1, type: 'insight', icon: 'ğŸ”', damage: 30, effect: 'æ”»æ’ƒåŠ›å†è¨ˆç®—', description: 'æŒã¦ã‚‹ã‚¹ã‚­ãƒ«ã‚’æ£šå¸ã—', soundType: 'magic' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>interest_spark: { id: 'interest_spark', name: 'èˆˆå‘³é–¢å¿ƒã®ç«ç¨®', level: 15, tier: 1, type: 'empathy', icon: 'ğŸ”¥', damage: 50, effect: 'ç¶™ç¶šãƒ€ãƒ¡ãƒ¼ã‚¸', description: 'æƒ…ç†±ãŒå¾ã€…ã«ç‡ƒãˆåºƒãŒã‚‹', soundType: 'magic' },</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>strength_excavate: { id: 'strength_excavate', name: 'å¼·ã¿ã®ç™ºæ˜', level: 16, tier: 1, type: 'empathy', icon: 'â›ï¸', damage: 35, effect: 'ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ç‡UP', description: 'éš ã‚ŒãŸæ‰èƒ½ã‚’æ˜ã‚Šèµ·ã“ã™', soundType: 'attack' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>weakness_transform: { id: 'weakness_transform', name: 'çŸ­æ‰€ã®è»¢æ›', level: 17, tier: 1, type: 'reframe', icon: 'ğŸ”„', damage: 40, effect: 'ãƒ‡ãƒãƒ•åè»¢', description: 'å¼±ã¿ã‚’å¼·ã¿ã«è»¢æ›ã™ã‚‹', soundType: 'magic' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>success_wave: { id: 'success_wave', name: 'æˆåŠŸä½“é¨“ã®æ³¢å‹•', level: 18, tier: 1, type: 'empathy', icon: 'ğŸŒŠ', damage: 30, effect: 'å…¨ä½“å›å¾©', description: 'éå»ã®æˆåŠŸãŒå‹‡æ°—ã‚’ä¸ãˆã‚‹', soundType: 'defense' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>failure_nourish: { id: 'failure_nourish', name: 'å¤±æ•—ã®ç³§', level: 19, tier: 1, type: 'reframe', icon: 'ğŸŒ±', damage: 25, effect: 'HPå›å¾©ï¼‹è€æ€§UP', description: 'å¤±æ•—ã‹ã‚‰å­¦ã³æˆé•·ã™ã‚‹', soundType: 'defense' },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>origin_return: { id: 'origin_return', name: 'åˆå¿ƒå¿˜ã‚‹ã¹ã‹ã‚‰ãš', level: 20, tier: 1, type: 'empathy', icon: 'ğŸ', damage: 45, effect: 'åŸç‚¹å›å¸°ãƒ€ãƒ¡ãƒ¼ã‚¸', description: 'åŸç‚¹ã«æˆ»ã‚ŠåŠ›ã‚’å–ã‚Šæˆ»ã™', soundType: 'magic' }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let playerData = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let currentEnemy = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let currentScene = 'title';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let battleState = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>enemyHp: 100,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>enemyMaxHp: 100,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>anxiety: 50,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>hope: 50,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>turn: 0,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>messages: [],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>shield: 0,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>counter: false</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let isProcessing = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let isRendering = false;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const enemies = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>anxiety: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>id: 'anxiety',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>name: "ä¸å®‰ã®åŒ–èº«",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>catchphrase: "æœªæ¥ã¸ã®æã‚ŒãŒå½¢ã‚’æŒã£ã¦ç¾ã‚ŒãŸ",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>maxHp: 120,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>weakness: "empathy",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>dialogue: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>intro: "ã€Œå›ã«ä½•ãŒã§ãã‚‹ï¼Ÿ å¤±æ•—ã™ã‚‹ã®æ±ºã¾ã£ã¦ã‚‹ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>attack: "ã€Œå‘¨ã‚Šã®æœŸå¾…ã«å¿œãˆã‚‰ã‚Œãªã„ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>weak: "ã€Œã§ã‚‚... ä¸å®‰ã¯æ‚ªã„ã“ã¨ã§...ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>defeat: "ã€Œä¸å®‰ã¨ã¯ã€å¯èƒ½æ€§ã¸ã®æ‰‰ã ã£ãŸã€"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>background: "linear-gradient(180deg, #0f0f23 0%, #1a1a3e 100%)"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>overwork: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>id: 'overwork',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>name: "é‡åŠ´åƒã®å·¨äºº",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>catchphrase: "çµ‚ã‚ã‚ŠãªãåŠ´åƒãŒç«‹ã¡ã¯ã ã‹ã‚‹",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>maxHp: 150,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>weakness: "insight",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>dialogue: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>intro: "ã€Œä¼‘ã‚€ãªã€‚æ­¢ã¾ã‚‹ãªã€‚åƒãç¶šã‘ã‚ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>attack: "ã€ŒãŠå‰ã®æ™‚é–“ã‚‚äººç”Ÿã‚‚ã€å…¨ã¦ä»•äº‹ã®ã‚‚ã®ã ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>weak: "ã€ŒåŠ´åƒåŸºæº–... ãã‚“ãªã‚‚ã®...ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>defeat: "ã€Œåƒãã¨ã¯... äººé–“ã®ãŸã‚ã®ã‚‚ã®...ã€"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>background: "linear-gradient(180deg, #1a1a2e 0%, #2d2d44 100%)"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>selfDoubt: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>id: 'selfDoubt',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>name: "è‡ªå·±å¦å®šã®å£°",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>catchphrase: "å†…ãªã‚‹æ‰¹åˆ¤è€…ãŒç›®ã‚’è¦šã¾ã™",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>maxHp: 100,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>weakness: "reframe",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>dialogue: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>intro: "ã€ŒãŠå‰ã«ã¯ä¾¡å€¤ãŒãªã„ã€‚æ‰èƒ½ã‚‚ãªã„ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>attack: "ã€Œèª°ã‚‚ãŠå‰ã‚’èªã‚ãªã„ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>weak: "ã€Œãã†... è©•ä¾¡è»¸ã¯ä¸€ã¤ã˜ã‚ƒ...ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>defeat: "ã€Œä¾¡å€¤ã¨ã¯ã€è‡ªåˆ†ã§æ±ºã‚ã‚‹ã‚‚ã®ã ã£ãŸã€"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>background: "linear-gradient(180deg, #1a1a2e 0%, #2d2d44 100%)"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>burnout: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>id: 'burnout',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>name: "ç‡ƒãˆå°½ããŸç‚",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>catchphrase: "æƒ…ç†±ãŒç°ã¨ãªã‚Šç«‹ã¡ä¸ŠãŒã‚‹",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>maxHp: 110,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>weakness: "empathy",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>dialogue: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>intro: "ã€Œã‚‚ã†ä½•ã‚‚æ„Ÿã˜ãªã„ã€‚ä½•ã‚‚å‹•ã‘ãªã„ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>attack: "ã€Œé ‘å¼µã‚‹æ„å‘³ãªã‚“ã¦ãªã‹ã£ãŸã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>weak: "ã€Œã§ã‚‚... ã¾ã å°ã•ãªç«ç¨®ãŒ...ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>defeat: "ã€Œæƒ…ç†±ã¯... ã¾ãŸç‡ƒã‚„ã›ã‚‹ã‚‚ã®...ã€"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>background: "linear-gradient(180deg, #2d1b1e 0%, #1a1a2e 100%)"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>conformity: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>id: 'conformity',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>name: "åŒèª¿åœ§åŠ›ã®ç¾¤ã‚Œ",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>catchphrase: "ç„¡æ•°ã®å£°ãŒä¸€ã¤ã«æº¶ã‘åˆã†",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>maxHp: 130,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>weakness: "reframe",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>dialogue: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>intro: "ã€Œã¿ã‚“ãªãã†ã—ã¦ã‚‹ã€‚ãŠå‰ã ã‘é•ã†ã®ï¼Ÿã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>attack: "ã€Œç©ºæ°—èª­ã‚ã‚ˆã€‚å”èª¿æ€§ãªã„ãªã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>weak: "ã€Œã§ã‚‚... å€‹æ€§ã£ã¦...ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>defeat: "ã€Œå¤šæ§˜æ€§ã“ããŒ... åŠ›ã ã£ãŸ...ã€"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>background: "linear-gradient(180deg, #1a1a2e 0%, #2d2244 100%)"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>judgment: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>id: 'judgment',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>name: "è£ãã®å¤©ç§¤",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>catchphrase: "è©•ä¾¡ã¨æŸ»å®šã®åŒ–èº«ãŒå›è‡¨ã™ã‚‹",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>maxHp: 140,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>weakness: "insight",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>dialogue: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>intro: "ã€ŒãŠå‰ã®ä¾¡å€¤ã‚’æ¸¬å®šã™ã‚‹ã€‚åˆæ ¼ç‚¹ã«ã¯å±Šã‹ãªã„ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>attack: "ã€Œè©•ä¾¡Dã€‚èƒ½åŠ›ä¸è¶³ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>weak: "ã€Œæ•°å€¤åŒ–ã§ããªã„ã‚‚ã®ãŒ...ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>defeat: "ã€Œäººã®ä¾¡å€¤ã¯... ç‚¹æ•°ã˜ã‚ƒãªã„...ã€"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>background: "linear-gradient(180deg, #2d1b1e 0%, #1a2332 100%)"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>maze: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>id: 'maze',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>name: "è¿·å®®ã®ç•ªäºº",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>catchphrase: "ç„¡é™ã®é¸æŠè‚¢ãŒé“ã‚’å¡ã",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>maxHp: 125,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>weakness: "insight",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>dialogue: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>intro: "ã€Œã©ã®é“ã‚’é¸ã¶ï¼Ÿ å…¨ã¦è¡Œãæ­¢ã¾ã‚Šã ãŒã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>attack: "ã€Œæ­£è§£ã¯ãªã„ã€‚æ°¸é ã«è¿·ã„ç¶šã‘ã‚ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>weak: "ã€Œé“ã¯... è‡ªåˆ†ã§ä½œã‚Œã‚‹...ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>defeat: "ã€Œè¿·ã†ã“ã¨ã‚‚... ä¸€ã¤ã®ç­”ãˆ...ã€"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>background: "linear-gradient(180deg, #1a2e1a 0%, #1a1a2e 100%)"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>ideal: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>id: 'ideal',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>name: "ç†æƒ³ã¨ç¾å®Ÿã®äº€è£‚",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>catchphrase: "è¼ãå¤¢ã¨å´©ã‚Œã‚‹ç¾å®ŸãŒäº¤éŒ¯ã™ã‚‹",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>maxHp: 115,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>weakness: "reframe",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>dialogue: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>intro: "ã€Œç†æƒ³ã¯ç¾ã—ã„ã€‚ã ãŒç¾å®Ÿã¯é†œã„ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>attack: "ã€Œå¤¢è¦‹ãŸæœªæ¥ã¯å¹»æƒ³ã ã£ãŸã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>weak: "ã€Œã§ã‚‚... ç†æƒ³ã¨ç¾å®Ÿã¯...ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>defeat: "ã€Œä¸¡æ–¹ã‚ã£ã¦... äººã¯é€²ã‚ã‚‹...ã€"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>background: "linear-gradient(180deg, #2d2244 0%, #1a1a2e 100%)"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>role: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>id: 'role',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>name: "å½¹å‰²ã®é§",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>catchphrase: "è‚©æ›¸ãã¨è²¬ä»»ãŒé‡ãåœ§ã—æ›ã‹ã‚‹",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>maxHp: 135,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>weakness: "empathy",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>dialogue: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>intro: "ã€ŒãŠå‰ã¯ã€‡ã€‡ã§ã‚ã‚‹ã¹ãã ã€‚ãã‚Œä»¥å¤–ã¯è¨±ã•ã‚Œãªã„ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>attack: "ã€Œå½¹å‰²ã‚’æœãŸã›ã€‚æœŸå¾…ã«å¿œãˆã‚ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>weak: "ã€Œã§ã‚‚... å½¹å‰²ã®ä¸‹ã«ã¯...ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>defeat: "ã€Œäººã¯... å½¹å‰²ã ã‘ã˜ã‚ƒãªã„...ã€"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>background: "linear-gradient(180deg, #1a2332 0%, #2d2d44 100%)"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>void: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>id: 'void',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>name: "è™šç„¡ã®æ·±æ·µ",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>catchphrase: "æ„å‘³ã®å–ªå¤±ãŒæš—é—‡ã‚’å‘¼ã¶",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>maxHp: 145,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>weakness: "empathy",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>dialogue: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>intro: "ã€Œå…¨ã¦ãŒç„¡æ„å‘³ã€‚ä½•ã‚’ã—ã¦ã‚‚åŒã˜ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>attack: "ã€Œå­˜åœ¨ã™ã‚‹æ„å‘³ãªã©ã€ãªã„ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>weak: "ã€Œã§ã‚‚... å°ã•ãªæ„å‘³ãŒ...ã€",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>defeat: "ã€Œæ„å‘³ã¯... è‡ªåˆ†ã§è¦‹ã¤ã‘ã‚‹ã‚‚ã®...ã€"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>background: "linear-gradient(180deg, #0f0f23 0%, #1a1a3e 100%)"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// ğŸµ ã‚µã‚¦ãƒ³ãƒ‰ã‚·ã‚¹ãƒ†ãƒ </span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let bgmContext = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let currentBgm = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let bgmGainNode = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let bgmEnabled = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>let bgmVolume = 0.3;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// BGMåˆ¶å¾¡</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function stopBgm() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (currentBgm) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>currentBgm.stop();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} catch(e) {}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>currentBgm = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function setBgmVolume(volume) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>bgmVolume = Math.max(0, Math.min(1, volume));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (bgmGainNode) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>bgmGainNode.gain.setValueAtTime(bgmVolume, bgmContext.currentTime);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢BGM - å£®å¤§ã§å¸Œæœ›ã«æº€ã¡ãŸæ—‹å¾‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function playTitleBgm() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!bgmEnabled) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>stopBgm();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>bgmContext = new (window.AudioContext || window.webkitAudioContext)();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>bgmGainNode = bgmContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>bgmGainNode.gain.setValueAtTime(bgmVolume, bgmContext.currentTime);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>bgmGainNode.connect(bgmContext.destination);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const now = bgmContext.currentTime;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const tempo = 0.5; // ã‚†ã£ãŸã‚Šã¨ã—ãŸãƒ†ãƒ³ãƒ</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// ãƒ¡ãƒ­ãƒ‡ã‚£ãƒ¼ãƒ©ã‚¤ãƒ³: C Major ã‚¹ã‚±ãƒ¼ãƒ«ã§å¸Œæœ›çš„ãªæ—‹å¾‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const melody = [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 523.25, start: 0, duration: tempo}, // C5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 587.33, start: tempo, duration: tempo}, // D5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 659.25, start: tempo * 2, duration: tempo}, // E5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 783.99, start: tempo * 3, duration: tempo * 2}, // G5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 659.25, start: tempo * 5, duration: tempo}, // E5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 587.33, start: tempo * 6, duration: tempo}, // D5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 523.25, start: tempo * 7, duration: tempo * 2}, // C5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>];</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>melody.forEach(({note, start, duration}) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const osc = bgmContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const oscGain = bgmContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.type = 'sine';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.frequency.setValueAtTime(note, now + start);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.gain.setValueAtTime(0, now + start);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.gain.linearRampToValueAtTime(0.15, now + start + 0.05);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.gain.linearRampToValueAtTime(0, now + start + duration);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.connect(oscGain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.connect(bgmGainNode);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.start(now + start);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.stop(now + start + duration);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// ãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼: æ¸©ã‹ã¿ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰é€²è¡Œ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const chords = [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{notes: [261.63, 329.63, 392.00], start: 0, duration: tempo * 2}, // C major</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{notes: [293.66, 369.99, 440.00], start: tempo * 2, duration: tempo * 2}, // D minor</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{notes: [329.63, 392.00, 493.88], start: tempo * 4, duration: tempo * 2}, // E minor</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{notes: [261.63, 329.63, 392.00], start: tempo * 6, duration: tempo * 3}, // C major</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>];</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>chords.forEach(({notes, start, duration}) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>notes.forEach(note =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>const osc = bgmContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>const oscGain = bgmContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>osc.type = 'triangle';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>osc.frequency.setValueAtTime(note, now + start);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>oscGain.gain.setValueAtTime(0, now + start);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>oscGain.gain.linearRampToValueAtTime(0.08, now + start + 0.1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>oscGain.gain.setValueAtTime(0.08, now + start + duration - 0.2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>oscGain.gain.linearRampToValueAtTime(0, now + start + duration);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>osc.connect(oscGain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>oscGain.connect(bgmGainNode);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>osc.start(now + start);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>osc.stop(now + start + duration);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// ãƒ«ãƒ¼ãƒ—è¨­å®š</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>setTimeout(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (currentScene === 'title' &amp;&amp; bgmEnabled) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>playTitleBgm();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}, tempo * 9 * 1000);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>currentBgm = { context: bgmContext };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// ãƒãƒˆãƒ«BGM - ç·Šå¼µæ„Ÿã®ã‚ã‚‹ãƒªã‚ºãƒŸã‚«ãƒ«ãªæ—‹å¾‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function playBattleBgm() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!bgmEnabled) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>stopBgm();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>bgmContext = new (window.AudioContext || window.webkitAudioContext)();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>bgmGainNode = bgmContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>bgmGainNode.gain.setValueAtTime(bgmVolume, bgmContext.currentTime);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>bgmGainNode.connect(bgmContext.destination);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const now = bgmContext.currentTime;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const tempo = 0.25; // é€Ÿã„ãƒ†ãƒ³ãƒ</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// ãƒ¡ã‚¤ãƒ³ãƒªãƒ•: A minor ã‚¹ã‚±ãƒ¼ãƒ«ã§ç·Šå¼µæ„Ÿ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const battleRiff = [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 440.00, start: 0, duration: tempo * 0.8}, // A4</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 493.88, start: tempo, duration: tempo * 0.8}, // B4</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 523.25, start: tempo * 2, duration: tempo * 0.8}, // C5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 587.33, start: tempo * 3, duration: tempo * 0.8}, // D5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 523.25, start: tempo * 4, duration: tempo * 0.8}, // C5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 493.88, start: tempo * 5, duration: tempo * 0.8}, // B4</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 440.00, start: tempo * 6, duration: tempo * 1.5}, // A4</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>];</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>battleRiff.forEach(({note, start, duration}) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const osc = bgmContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const oscGain = bgmContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.type = 'square';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.frequency.setValueAtTime(note, now + start);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.gain.setValueAtTime(0, now + start);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.gain.linearRampToValueAtTime(0.12, now + start + 0.01);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.gain.linearRampToValueAtTime(0, now + start + duration);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.connect(oscGain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.connect(bgmGainNode);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.start(now + start);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.stop(now + start + duration);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const bassLine = [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 110.00, start: 0, duration: tempo * 2}, // A2</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 130.81, start: tempo * 2, duration: tempo * 2}, // C3</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 146.83, start: tempo * 4, duration: tempo * 2}, // D3</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 110.00, start: tempo * 6, duration: tempo * 2}, // A2</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>];</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>bassLine.forEach(({note, start, duration}) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const osc = bgmContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const oscGain = bgmContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.type = 'sine';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.frequency.setValueAtTime(note, now + start);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.gain.setValueAtTime(0.15, now + start);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.gain.setValueAtTime(0.15, now + start + duration - 0.05);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.gain.linearRampToValueAtTime(0, now + start + duration);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.connect(oscGain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.connect(bgmGainNode);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.start(now + start);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.stop(now + start + duration);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// ãƒ«ãƒ¼ãƒ—è¨­å®š</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>setTimeout(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if ((currentScene === 'battle' || currentScene === 'battle-intro') &amp;&amp; bgmEnabled) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>playBattleBgm();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}, tempo * 8 * 1000);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>currentBgm = { context: bgmContext };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// å‹åˆ©BGM - æ˜ã‚‹ãè¯ã‚„ã‹ãªãƒ•ã‚¡ãƒ³ãƒ•ã‚¡ãƒ¼ãƒ¬</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function playVictoryBgm() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!bgmEnabled) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>stopBgm();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>bgmContext = new (window.AudioContext || window.webkitAudioContext)();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>bgmGainNode = bgmContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>bgmGainNode.gain.setValueAtTime(bgmVolume, bgmContext.currentTime);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>bgmGainNode.connect(bgmContext.destination);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const now = bgmContext.currentTime;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// ãƒ•ã‚¡ãƒ³ãƒ•ã‚¡ãƒ¼ãƒ¬æ—‹å¾‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const fanfare = [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 523.25, start: 0, duration: 0.3}, // C5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 659.25, start: 0.3, duration: 0.3}, // E5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 783.99, start: 0.6, duration: 0.3}, // G5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 1046.50, start: 0.9, duration: 0.6}, // C6</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 783.99, start: 1.6, duration: 0.2}, // G5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>{note: 1046.50, start: 1.8, duration: 0.8}, // C6</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>];</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>fanfare.forEach(({note, start, duration}) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const osc = bgmContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const oscGain = bgmContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.type = 'sawtooth';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.frequency.setValueAtTime(note, now + start);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.gain.setValueAtTime(0, now + start);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.gain.linearRampToValueAtTime(0.2, now + start + 0.02);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.gain.linearRampToValueAtTime(0, now + start + duration);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.connect(oscGain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.connect(bgmGainNode);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.start(now + start);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.stop(now + start + duration);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// ã‚­ãƒ©ã‚­ãƒ©ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>for (let i = 0; i &lt; 8; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const osc = bgmContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const oscGain = bgmContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.type = 'sine';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.frequency.setValueAtTime(1000 + Math.random() * 1000, now + i * 0.15);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.gain.setValueAtTime(0, now + i * 0.15);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.gain.linearRampToValueAtTime(0.1, now + i * 0.15 + 0.01);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.gain.linearRampToValueAtTime(0, now + i * 0.15 + 0.3);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.connect(oscGain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>oscGain.connect(bgmGainNode);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.start(now + i * 0.15);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>osc.stop(now + i * 0.15 + 0.3);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>currentBgm = { context: bgmContext };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// æ”»æ’ƒåŠ¹æœéŸ³ï¼ˆç‰©ç†ç³»ã‚¹ã‚­ãƒ«ï¼‰</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function playAttackSound() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const audioContext = new (window.AudioContext || window.webkitAudioContext)();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const now = audioContext.currentTime;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// æ–¬æ’ƒéŸ³ï¼šé‹­ã„é«˜éŸ³ã‹ã‚‰ä½éŸ³ã¸ã®æ€¥é™ä¸‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const slashOsc = audioContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const slashGain = audioContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>slashOsc.type = 'sawtooth';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>slashOsc.frequency.setValueAtTime(1200, now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>slashOsc.frequency.exponentialRampToValueAtTime(200, now + 0.08);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>slashGain.gain.setValueAtTime(0.4, now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>slashGain.gain.exponentialRampToValueAtTime(0.01, now + 0.08);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>slashOsc.connect(slashGain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>slashGain.connect(audioContext.destination);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>slashOsc.start(now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>slashOsc.stop(now + 0.08);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// è¡æ’ƒéŸ³ï¼šä½éŸ³ãƒ‘ãƒ³ãƒ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const impactOsc = audioContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const impactGain = audioContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>impactOsc.type = 'sine';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>impactOsc.frequency.setValueAtTime(80, now + 0.05);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>impactGain.gain.setValueAtTime(0.5, now + 0.05);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>impactGain.gain.exponentialRampToValueAtTime(0.01, now + 0.2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>impactOsc.connect(impactGain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>impactGain.connect(audioContext.destination);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>impactOsc.start(now + 0.05);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>impactOsc.stop(now + 0.2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>} catch (e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>console.warn('Audio playback failed:', e);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// é­”æ³•åŠ¹æœéŸ³ï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼ç³»ã‚¹ã‚­ãƒ«ï¼‰</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function playMagicSound() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const audioContext = new (window.AudioContext || window.webkitAudioContext)();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const now = audioContext.currentTime;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// ã‚­ãƒ©ã‚­ãƒ©ä¸Šæ˜‡éŸ³</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const magic1 = audioContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const magic1Gain = audioContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic1.type = 'sine';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic1.frequency.setValueAtTime(523.25, now); // C5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic1.frequency.linearRampToValueAtTime(783.99, now + 0.15); // G5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic1Gain.gain.setValueAtTime(0.2, now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic1Gain.gain.linearRampToValueAtTime(0, now + 0.15);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic1.connect(magic1Gain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic1Gain.connect(audioContext.destination);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic1.start(now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic1.stop(now + 0.15);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const magic2 = audioContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const magic2Gain = audioContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic2.type = 'sine';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic2.frequency.setValueAtTime(659.25, now + 0.05); // E5</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic2.frequency.linearRampToValueAtTime(1046.50, now + 0.2); // C6</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic2Gain.gain.setValueAtTime(0.2, now + 0.05);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic2Gain.gain.linearRampToValueAtTime(0, now + 0.2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic2.connect(magic2Gain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic2Gain.connect(audioContext.destination);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic2.start(now + 0.05);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>magic2.stop(now + 0.2);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// ã‚¨ãƒãƒ«ã‚®ãƒ¼æŒç¶šéŸ³</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const energyOsc = audioContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const energyGain = audioContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>energyOsc.type = 'triangle';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>energyOsc.frequency.setValueAtTime(880, now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>energyOsc.frequency.linearRampToValueAtTime(1320, now + 0.3);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>energyGain.gain.setValueAtTime(0.15, now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>energyGain.gain.linearRampToValueAtTime(0, now + 0.3);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>energyOsc.connect(energyGain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>energyGain.connect(audioContext.destination);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>energyOsc.start(now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>energyOsc.stop(now + 0.3);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>} catch (e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>console.warn('Audio playback failed:', e);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// é˜²å¾¡ãƒ»å›å¾©åŠ¹æœéŸ³ï¼ˆã‚·ãƒ¼ãƒ«ãƒ‰ç³»ã‚¹ã‚­ãƒ«ï¼‰</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function playDefenseSound() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const audioContext = new (window.AudioContext || window.webkitAudioContext)();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const now = audioContext.currentTime;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// ã‚·ãƒ¼ãƒ«ãƒ‰å±•é–‹éŸ³ï¼šä½éŸ³ã‹ã‚‰é«˜éŸ³ã¸</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const shield1 = audioContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const shield1Gain = audioContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield1.type = 'sine';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield1.frequency.setValueAtTime(200, now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield1.frequency.linearRampToValueAtTime(600, now + 0.2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield1Gain.gain.setValueAtTime(0.3, now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield1Gain.gain.linearRampToValueAtTime(0, now + 0.2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield1.connect(shield1Gain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield1Gain.connect(audioContext.destination);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield1.start(now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield1.stop(now + 0.2);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// ã‚­ãƒ¼ãƒ³éŸ³ï¼šé«˜éŸ³æŒç¶š</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const shield2 = audioContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const shield2Gain = audioContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield2.type = 'sine';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield2.frequency.setValueAtTime(1200, now + 0.15);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield2Gain.gain.setValueAtTime(0.2, now + 0.15);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield2Gain.gain.linearRampToValueAtTime(0, now + 0.5);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield2.connect(shield2Gain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield2Gain.connect(audioContext.destination);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield2.start(now + 0.15);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>shield2.stop(now + 0.5);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// ãƒãƒªã‚¢å…±é³´éŸ³</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const resonance = audioContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const resonanceGain = audioContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>resonance.type = 'triangle';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>resonance.frequency.setValueAtTime(800, now + 0.1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>resonanceGain.gain.setValueAtTime(0.15, now + 0.1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>resonanceGain.gain.linearRampToValueAtTime(0, now + 0.4);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>resonance.connect(resonanceGain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>resonanceGain.connect(audioContext.destination);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>resonance.start(now + 0.1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>resonance.stop(now + 0.4);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>} catch (e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>console.warn('Audio playback failed:', e);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>// æ’ƒç ´åŠ¹æœéŸ³ï¼ˆãƒœã‚¹æ’ƒç ´æ™‚ã®é‡åšãªã‚µã‚¦ãƒ³ãƒ‰ï¼‰</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function playDefeatSound() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const audioContext = new (window.AudioContext || window.webkitAudioContext)();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const now = audioContext.currentTime;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// é‡ä½éŸ³</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const bassOsc = audioContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const bassGain = audioContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>bassOsc.type = 'sine';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>bassOsc.frequency.setValueAtTime(65.41, now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>bassGain.gain.setValueAtTime(0, now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>bassGain.gain.linearRampToValueAtTime(0.3, now + 0.2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>bassGain.gain.linearRampToValueAtTime(0.21, now + 1.7);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>bassGain.gain.linearRampToValueAtTime(0, now + 3.2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>bassOsc.connect(bassGain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>bassGain.connect(audioContext.destination);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>bassOsc.start(now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>bassOsc.stop(now + 3.2);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// å´©å£Šãƒã‚¤ã‚º</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const bufferSize = audioContext.sampleRate * 2.5;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const noiseBuffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const output = noiseBuffer.getChannelData(0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>let lastOut = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>for (let i = 0; i &lt; bufferSize; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>const white = Math.random() * 2 - 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>output[i] = (lastOut + (0.02 * white)) / 1.02;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>lastOut = output[i];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>output[i] *= 3.5;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const noiseSource = audioContext.createBufferSource();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>noiseSource.buffer = noiseBuffer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const noiseFilter = audioContext.createBiquadFilter();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>noiseFilter.type = 'lowpass';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>noiseFilter.frequency.value = 500;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const noiseGain = audioContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>noiseGain.gain.setValueAtTime(0, now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>noiseGain.gain.linearRampToValueAtTime(0.15, now + 0.1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>noiseGain.gain.linearRampToValueAtTime(0.05, now + 1.3);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>noiseGain.gain.linearRampToValueAtTime(0, now + 2.3);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>noiseSource.connect(noiseFilter);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>noiseFilter.connect(noiseGain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>noiseGain.connect(audioContext.destination);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>noiseSource.start(now);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// ä¸‹é™éŸ³</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const fallOsc = audioContext.createOscillator();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const fallGain = audioContext.createGain();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>fallOsc.type = 'sawtooth';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>fallOsc.frequency.setValueAtTime(146.83, now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>fallOsc.frequency.exponentialRampToValueAtTime(55, now + 2.5);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>fallGain.gain.setValueAtTime(0, now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>fallGain.gain.linearRampToValueAtTime(0.15, now + 0.1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>fallGain.gain.linearRampToValueAtTime(0, now + 2.5);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>fallOsc.connect(fallGain);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>fallGain.connect(audioContext.destination);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>fallOsc.start(now);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>fallOsc.stop(now + 2.5);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>} catch (e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>console.warn('Audio playback failed:', e);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>const dataHandler = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>onDataChanged(data) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (data.length &gt; 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>playerData = data[0];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>async function initializeSDKs() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const dataResult = await window.dataSdk.init(dataHandler);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!dataResult.isOk) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>console.error("Data SDK initialization failed");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (window.elementSdk) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>window.elementSdk.init({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>defaultConfig,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>onConfigChange: async (config) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>mapToCapabilities: (config) =&gt; ({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>recolorables: [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>get: () =&gt; config.background_color || defaultConfig.background_color,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>set: (value) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>config.background_color = value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>window.elementSdk.setConfig({ background_color: value });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>get: () =&gt; config.surface_color || defaultConfig.surface_color,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>set: (value) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>config.surface_color = value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>window.elementSdk.setConfig({ surface_color: value });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>get: () =&gt; config.text_color || defaultConfig.text_color,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>set: (value) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>config.text_color = value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>window.elementSdk.setConfig({ text_color: value });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>get: () =&gt; config.primary_action_color || defaultConfig.primary_action_color,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>set: (value) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>config.primary_action_color = value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>window.elementSdk.setConfig({ primary_action_color: value });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>get: () =&gt; config.secondary_action_color || defaultConfig.secondary_action_color,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>set: (value) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>config.secondary_action_color = value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>window.elementSdk.setConfig({ secondary_action_color: value });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>borderables: [],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>fontEditable: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>get: () =&gt; config.font_family || defaultConfig.font_family,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>set: (value) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>config.font_family = value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>window.elementSdk.setConfig({ font_family: value });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>fontSizeable: {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>get: () =&gt; config.font_size || defaultConfig.font_size,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>set: (value) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>config.font_size = value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>window.elementSdk.setConfig({ font_size: value });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>}),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>mapToEditPanelValues: (config) =&gt; new Map([</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>["main_title", config.main_title || defaultConfig.main_title],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>["subtitle", config.subtitle || defaultConfig.subtitle],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>["tagline", config.tagline || defaultConfig.tagline],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>["start_button", config.start_button || defaultConfig.start_button],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>["choice_empathy", config.choice_empathy || defaultConfig.choice_empathy],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>["choice_insight", config.choice_insight || defaultConfig.choice_insight],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>["choice_reframe", config.choice_reframe || defaultConfig.choice_reframe]</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>])</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function getConfig() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>return window.elementSdk?.config || defaultConfig;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function getUnlockedSkills() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!playerData) return [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const unlockedIds = (playerData.unlocked_skills || '').split(',').filter(s =&gt; s);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>return Object.values(skillDatabase)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.filter(skill =&gt; skill.level &lt;= playerData.player_level)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>.filter(skill =&gt; unlockedIds.includes(skill.type) || skill.level &lt;= 10);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function getAvailableSkillsForBattle() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const allSkills = getUnlockedSkills();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// å…¨ç¿’å¾—ã‚¹ã‚­ãƒ«ã‹ã‚‰æœ€å¤§8å€‹ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const shuffled = [...allSkills].sort(() =&gt; Math.random() - 0.5);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>return shuffled.slice(0, Math.min(8, allSkills.length));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function renderCurrentScene() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (isRendering) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>isRendering = true;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const app = document.getElementById('app');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const config = getConfig();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>switch(currentScene) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>case 'title':</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>renderTitleScreen(app, config);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>case 'character-creation':</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>renderCharacterCreation(app, config);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>case 'story-intro':</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>renderStoryIntro(app, config);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>case 'skill-tree':</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>renderSkillTree(app, config);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>case 'battle-intro':</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>renderBattleIntro(app, config);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>case 'battle':</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>renderBattleScreen(app, config);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>case 'result':</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>renderResultScreen(app, config);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>case 'emotion-log':</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>renderEmotionLog(app, config);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>case 'ending':</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>renderEnding(app, config);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>case 'save-load':</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>renderSaveLoad(app, config);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>break;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>} finally {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>isRendering = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>async function getAllSaveData() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// Data SDKã‹ã‚‰å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ãŸã‚ã€onDataChangedã§ä¿æŒã—ã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>let allData = [];</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const tempHandler = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>onDataChanged(data) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>allData = data;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>};</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// æ—¢å­˜ã®handlerã‚’ä¸€æ™‚çš„ã«ä½¿ç”¨</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>await window.dataSdk.init(tempHandler);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>return allData;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function renderSaveLoad(app, config) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const baseSize = config.font_size || defaultConfig.font_size;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// å…¨ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼ˆplayerDataã®ä»–ã«ã‚‚è¤‡æ•°ã‚»ãƒ¼ãƒ–ãŒã‚ã‚‹å¯èƒ½æ€§ï¼‰</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const initPromise = getAllSaveData();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>app.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="h-full w-full overflow-auto p-8 fade-in"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>style="background: ${config.background_color || defaultConfig.background_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-family: ${config.font_family || defaultConfig.font_family}, sans-serif;"&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="max-w-md mx-auto space-y-6"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="text-center mb-6"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;h2 class="mb-2" style="font-size: ${baseSize * 2}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ğŸ’¾ ã‚»ãƒ¼ãƒ–ãƒ»ãƒ­ãƒ¼ãƒ‰ç®¡ç†</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize}px; opacity: 0.8;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div id="save-slots" class="space-y-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="text-center" style="font-size: ${baseSize}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>èª­ã¿è¾¼ã¿ä¸­...</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;button id="back-to-title-btn"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="w-full py-4 px-8 rounded-2xl font-bold"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.primary_action_color || defaultConfig.primary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 1.1}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>ã‚¿ã‚¤ãƒˆãƒ«ã«æˆ»ã‚‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>`;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§è¡¨ç¤º</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>initPromise.then(allSaves =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const slotsContainer = document.getElementById('save-slots');</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (allSaves.length === 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>slotsContainer.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="dialogue-box p-6 rounded-2xl text-center"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>style="font-size: ${baseSize}px; opacity: 0.7;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>slotsContainer.innerHTML = allSaves.map((save, index) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const battleLog = JSON.parse(save.battle_log || '[]');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const isCurrentSave = playerData &amp;&amp; save.__backendId === playerData.__backendId;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>return `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="dialogue-box p-5 rounded-2xl slide-up ${isCurrentSave ? 'glow-effect' : ''}"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="animation-delay: ${index * 0.1}s; ${isCurrentSave ? 'border: 2px solid ' + (config.primary_action_color || defaultConfig.primary_action_color) : ''}"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex justify-between items-start mb-3"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h3 style="font-size: ${baseSize * 1.2}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${save.player_name}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize * 0.85}px; opacity: 0.7;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>Lv.${save.player_level} | æˆ¦é—˜å›æ•°: ${battleLog.length}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${isCurrentSave ? `&lt;span style="font-size: ${baseSize}px;"&gt;âœ…&lt;/span&gt;` : ''}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="grid grid-cols-2 gap-2 mb-3" style="font-size: ${baseSize * 0.8}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;å…±æ„Ÿ: ${save.empathy}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;æ´å¯Ÿ: ${save.insight}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;å›å¾©: ${save.recovery}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;å½±éŸ¿: ${save.influence}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex space-x-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${!isCurrentSave ? `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button class="load-save-btn flex-1 py-2 px-4 rounded-xl font-bold"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>data-save-id="${save.__backendId}"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.primary_action_color || defaultConfig.primary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 0.85}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>ãƒ­ãƒ¼ãƒ‰</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>` : ''}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button class="delete-save-btn flex-1 py-2 px-4 rounded-xl font-bold"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>data-save-id="${save.__backendId}"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>data-save-name="${save.player_name}"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: #ef4444;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 0.85}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>å‰Šé™¤</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>}).join('');</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>// ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>document.querySelectorAll('.load-save-btn').forEach(btn =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>btn.addEventListener('click', async () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>if (isProcessing) return;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>isProcessing = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>btn.disabled = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>btn.textContent = 'ãƒ­ãƒ¼ãƒ‰ä¸­...';</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>const saveId = btn.dataset.saveId;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>const targetSave = allSaves.find(s =&gt; s.__backendId === saveId);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>if (targetSave) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>// ã“ã®ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã‚’playerDataã¨ã—ã¦ä½¿ç”¨</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>playerData = targetSave;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>// ç”»é¢ã‚’æ›´æ–°</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>setTimeout(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>isProcessing = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>currentScene = 'story-intro';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>}, 500);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>isProcessing = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>btn.disabled = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>btn.textContent = 'ãƒ­ãƒ¼ãƒ‰';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>// å‰Šé™¤ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>document.querySelectorAll('.delete-save-btn').forEach(btn =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>btn.addEventListener('click', async () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>if (isProcessing) return;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>const saveName = btn.dataset.saveName;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>const saveId = btn.dataset.saveId;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>// ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç¢ºèªUI</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>const parentDiv = btn.closest('.dialogue-box');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>const originalContent = parentDiv.innerHTML;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>parentDiv.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="text-center space-y-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>ã€Œ${saveName}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize * 0.85}px; opacity: 0.8;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex space-x-3"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button class="confirm-delete flex-1 py-3 px-4 rounded-xl font-bold"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: #ef4444;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 0.9}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>å‰Šé™¤ã™ã‚‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button class="cancel-delete flex-1 py-3 px-4 rounded-xl font-bold"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.secondary_action_color || defaultConfig.secondary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 0.9}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>ã‚­ãƒ£ãƒ³ã‚»ãƒ«</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>`;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>parentDiv.querySelector('.cancel-delete').addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>parentDiv.innerHTML = originalContent;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>renderSaveLoad(app, config);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>parentDiv.querySelector('.confirm-delete').addEventListener('click', async () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>if (isProcessing) return;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>isProcessing = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>parentDiv.querySelector('.confirm-delete').textContent = 'å‰Šé™¤ä¸­...';</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>const targetSave = allSaves.find(s =&gt; s.__backendId === saveId);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>if (targetSave) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const result = await window.dataSdk.delete(targetSave);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if (result.isOk) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>// å‰Šé™¤ã—ãŸã®ãŒç¾åœ¨ã®ã‚»ãƒ¼ãƒ–ãªã‚‰ã€playerDataã‚’nullã«</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if (playerData &amp;&amp; playerData.__backendId === saveId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>playerData = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>// ç”»é¢ã‚’å†èª­ã¿è¾¼ã¿</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setTimeout(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>isProcessing = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}, 500);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>parentDiv.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="text-center" style="color: #ef4444; font-size: ${baseSize}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setTimeout(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>isProcessing = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}, 2000);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>isProcessing = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>document.getElementById('back-to-title-btn').addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>currentScene = 'title';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function renderTitleScreen(app, config) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const baseSize = config.font_size || defaultConfig.font_size;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// ã‚¿ã‚¤ãƒˆãƒ«BGMé–‹å§‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>playTitleBgm();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>app.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="h-full w-full relative flex flex-col items-center justify-center fade-in"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>style="background: linear-gradient(180deg, ${config.background_color || defaultConfig.background_color} 0%, #1a1a3e 100%);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-family: ${config.font_family || defaultConfig.font_family}, sans-serif;"&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="absolute inset-0 opacity-20"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="absolute top-20 left-10 w-32 h-32 rounded-full pulse-effect"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.primary_action_color || defaultConfig.primary_action_color};"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="absolute bottom-40 right-10 w-40 h-40 rounded-full pulse-effect"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.secondary_action_color || defaultConfig.secondary_action_color}; animation-delay: 1s;"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;!-- éŸ³é‡ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;button id="bgm-toggle"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="absolute top-4 right-4 w-12 h-12 rounded-full flex items-center justify-center z-20"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.surface_color || defaultConfig.surface_color};<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 1.5}px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>box-shadow: 0 4px 12px rgba(0,0,0,0.3);"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>${bgmEnabled ? 'ğŸ”Š' : 'ğŸ”‡'}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="relative z-10 text-center px-8 w-full"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;h1 class="mb-2 slide-up gradient-text"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>style="font-size: ${baseSize * 2.5}px; font-weight: bold; letter-spacing: 2px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>${config.main_title || defaultConfig.main_title}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/h1&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;p class="mb-6 slide-up"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  </span>style="font-size: ${baseSize * 1.2}px; opacity: 0.9; animation-delay: 0.2s;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>${config.subtitle || defaultConfig.subtitle}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="my-10 slide-up" style="animation-delay: 0.4s;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="text-7xl mb-4"&gt;ğŸ“&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize}px; opacity: 0.8; line-height: 1.6;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>${config.tagline || defaultConfig.tagline}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;button id="start-btn"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="w-full max-w-md py-4 px-8 rounded-2xl font-bold glow-effect slide-up"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.primary_action_color || defaultConfig.primary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 1.3}px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>animation-delay: 0.6s;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>${config.start_button || defaultConfig.start_button}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>${playerData ? `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="w-full max-w-md mt-4 space-y-3"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button id="continue-btn"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="w-full py-3 px-8 rounded-2xl font-bold slide-up"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.secondary_action_color || defaultConfig.secondary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize}px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>opacity: 0.9;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>animation-delay: 0.8s;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>ç¶šãã‹ã‚‰ (Lv.${playerData.player_level})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button id="save-load-btn"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="w-full py-3 px-8 rounded-2xl font-bold slide-up"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: transparent;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>border: 2px solid ${config.primary_action_color || defaultConfig.primary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 0.9}px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>opacity: 0.9;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>animation-delay: 1s;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>ğŸ’¾ ã‚»ãƒ¼ãƒ–ãƒ»ãƒ­ãƒ¼ãƒ‰ç®¡ç†</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>` : ''}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>`;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>document.getElementById('bgm-toggle').addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>bgmEnabled = !bgmEnabled;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (!bgmEnabled) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>stopBgm();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>playTitleBgm();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>document.getElementById('start-btn').addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>currentScene = 'character-creation';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (playerData) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>document.getElementById('continue-btn').addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>currentScene = 'story-intro';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>document.getElementById('save-load-btn')?.addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>currentScene = 'save-load';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function renderCharacterCreation(app, config) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const baseSize = config.font_size || defaultConfig.font_size;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>app.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="h-full w-full flex flex-col items-center justify-center p-8 fade-in"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>style="background: ${config.background_color || defaultConfig.background_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-family: ${config.font_family || defaultConfig.font_family}, sans-serif;"&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="w-full max-w-md dialogue-box p-8 rounded-3xl slide-up"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;h2 class="mb-6 text-center"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>style="font-size: ${baseSize * 2}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>ã‚ãªãŸã¯èª°ã§ã™ã‹ï¼Ÿ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/h2&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;form id="character-form" class="space-y-6"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;label for="player-name" class="block mb-3"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="font-size: ${baseSize * 1.1}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>åå‰</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;input type="text" id="player-name" required</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="w-full p-4 rounded-xl border-2 text-center"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.surface_color || defaultConfig.surface_color};<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>border-color: ${config.primary_action_color || defaultConfig.primary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 1.2}px;"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>placeholder="ã‚ãªãŸã®åå‰"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="p-6 rounded-xl text-center"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.surface_color || defaultConfig.surface_color};<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 0.95}px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>line-height: 1.8;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p class="mb-4" style="font-weight: bold; font-size: ${baseSize * 1.1}px;"&gt;åˆæœŸã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="grid grid-cols-2 gap-3"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;å…±æ„Ÿ: 10&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;æ´å¯Ÿ: 10&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;å›å¾©: 10&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;å½±éŸ¿: 10&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;button type="submit" id="create-btn"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="w-full py-4 px-8 rounded-2xl font-bold glow-effect"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.primary_action_color || defaultConfig.primary_action_color};<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 1.3}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>æ—…ã‚’å§‹ã‚ã‚‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/form&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>`;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>document.getElementById('character-form').addEventListener('submit', async (e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>e.preventDefault();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const btn = document.getElementById('create-btn');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (isProcessing) return;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>isProcessing = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>btn.disabled = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>btn.style.opacity = '0.6';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>btn.textContent = 'ä½œæˆä¸­...';</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const name = document.getElementById('player-name').value;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const result = await window.dataSdk.create({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>player_level: 1,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>player_name: name,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>empathy: 10,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>insight: 10,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>recovery: 10,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>influence: 10,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>anxiety_level: 50,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>hope_level: 50,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>confidence_level: 50,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>unlocked_skills: 'empathy,insight,reframe',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>completed_battles: '',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>battle_log: JSON.stringify([]),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>created_at: new Date().toISOString()</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (result.isOk) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>setTimeout(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>currentScene = 'story-intro';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>}, 500);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>btn.disabled = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>btn.style.opacity = '1';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>btn.textContent = 'æ—…ã‚’å§‹ã‚ã‚‹';</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>const errorMsg = document.createElement('p');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>errorMsg.textContent = 'ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>errorMsg.style.color = '#ef4444';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>errorMsg.style.marginTop = '1rem';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>errorMsg.style.textAlign = 'center';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>document.getElementById('character-form').appendChild(errorMsg);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>isProcessing = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function renderStoryIntro(app, config) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!playerData) return;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const baseSize = config.font_size || defaultConfig.font_size;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const battleLog = JSON.parse(playerData.battle_log || '[]');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const victoryCount = battleLog.length;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>app.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div id="story-intro-screen" class="h-full w-full flex flex-col items-center justify-center p-8 fade-in cursor-pointer"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>style="background: linear-gradient(180deg, ${config.background_color || defaultConfig.background_color} 0%, #1a1a3e 100%);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-family: ${config.font_family || defaultConfig.font_family}, sans-serif;"&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="w-full max-w-md text-center space-y-6 slide-up pointer-events-none"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;h2 class="mb-3" style="font-size: ${baseSize * 2}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ç¬¬${victoryCount + 1}ç« </span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize * 1.2}px; opacity: 0.9;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>Lv.${playerData.player_level} ${playerData.player_name}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="dialogue-box p-6 rounded-3xl space-y-4"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>style="font-size: ${baseSize * 0.95}px; line-height: 1.8;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;ã‚ãªãŸã¯ä»Šã€äººç”Ÿã®å²è·¯ã«ç«‹ã£ã¦ã„ã‚‹ã€‚&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;ç›®ã®å‰ã«ã¯ã€æ§˜ã€…ãªé¸æŠè‚¢ãŒåºƒãŒã£ã¦ã„ã‚‹ã€‚&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;ã—ã‹ã—ã€å¿ƒã®ä¸­ã«ã¯ã€Œæ•µã€ãŒæ½œã‚“ã§ã„ã‚‹ã€‚&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p class="text-center pt-3" style="font-size: ${baseSize * 1.2}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ä¸å®‰ã€ç–‘å¿µã€ãã—ã¦éå»ã®å‚·...</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;ã“ã‚Œã‚‰ã¨å‘ãåˆã„ã€ç†è§£ã—ã€ä¹—ã‚Šè¶Šãˆã‚‹ã“ã¨ã§ã€&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;ã‚ãªãŸã¯æœ¬å½“ã®ç­”ãˆã‚’è¦‹ã¤ã‘ã‚‹ã ã‚ã†ã€‚&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="space-y-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;button id="auto-save-btn"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="w-full py-4 px-8 rounded-2xl font-bold glow-effect pointer-events-auto"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.primary_action_color || defaultConfig.primary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 1.3}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ğŸ’¾ è‡ªå‹•ã§ã‚»ãƒ¼ãƒ–</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;button id="skill-tree-btn"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="w-full py-3 px-6 rounded-xl pointer-events-auto"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: transparent;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>border: 2px solid ${config.secondary_action_color || defaultConfig.secondary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 0.9}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ğŸŒ³ ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼ã‚’è¦‹ã‚‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;button id="view-log-btn"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="w-full py-3 px-6 rounded-xl pointer-events-auto"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: transparent;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>border: 2px solid ${config.primary_action_color || defaultConfig.primary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 0.9}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ğŸ“– æˆé•·ãƒ­ã‚°ã‚’è¦‹ã‚‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>${victoryCount &gt;= 7 ? `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button id="ending-btn"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="w-full py-4 px-8 rounded-2xl font-bold pointer-events-auto"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.secondary_action_color || defaultConfig.secondary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 1.1}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>ç‰©èªã‚’çµ‚ãˆã‚‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>` : ''}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="pt-4" style="opacity: 0.7;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize * 0.9}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ğŸ‘† ã‚¿ãƒƒãƒ—ã—ã¦æ¬¡ã®è©¦ç·´ã¸</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>`;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const setupRandomBattle = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const enemyIds = Object.keys(enemies);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const randomEnemyId = enemyIds[Math.floor(Math.random() * enemyIds.length)];</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>currentEnemy = { ...enemies[randomEnemyId] };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>battleState = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>enemyHp: currentEnemy.maxHp,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>enemyMaxHp: currentEnemy.maxHp,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>anxiety: playerData.anxiety_level || 50,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>hope: playerData.hope_level || 50,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>turn: 0,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>messages: [],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>shield: 0,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>counter: false</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>currentScene = 'battle-intro';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// ç”»é¢å…¨ä½“ã‚¯ãƒªãƒƒã‚¯ã§æ¬¡ã®è©¦ç·´ã¸</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>document.getElementById('story-intro-screen')?.addEventListener('click', (e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã¯é™¤å¤–ï¼ˆãƒœã‚¿ãƒ³ã¯å€‹åˆ¥ã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’æŒã¤ãŸã‚ï¼‰</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (!e.target.closest('button')) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>setupRandomBattle();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// è‡ªå‹•ã‚»ãƒ¼ãƒ–ãƒœã‚¿ãƒ³</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>document.getElementById('auto-save-btn')?.addEventListener('click', async (e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>e.stopPropagation(); // è¦ªè¦ç´ ã¸ã®ã‚¤ãƒ™ãƒ³ãƒˆä¼æ’­ã‚’æ­¢ã‚ã‚‹</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (isProcessing) return;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const btn = document.getElementById('auto-save-btn');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>isProcessing = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>btn.disabled = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>btn.textContent = 'ğŸ’¾ ã‚»ãƒ¼ãƒ–ä¸­...';</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ï¼ˆæ›´æ–°ï¼‰</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const result = await window.dataSdk.update({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>...playerData</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (result.isOk) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>btn.textContent = 'âœ… ã‚»ãƒ¼ãƒ–å®Œäº†ï¼';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>setTimeout(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>btn.textContent = 'ğŸ’¾ è‡ªå‹•ã§ã‚»ãƒ¼ãƒ–';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>btn.disabled = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>isProcessing = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>}, 1500);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>btn.textContent = 'âŒ ã‚»ãƒ¼ãƒ–å¤±æ•—';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>setTimeout(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>btn.textContent = 'ğŸ’¾ è‡ªå‹•ã§ã‚»ãƒ¼ãƒ–';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>btn.disabled = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>isProcessing = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>}, 1500);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>document.getElementById('skill-tree-btn')?.addEventListener('click', (e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>e.stopPropagation();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>currentScene = 'skill-tree';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>document.getElementById('view-log-btn')?.addEventListener('click', (e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>e.stopPropagation();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>currentScene = 'emotion-log';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>document.getElementById('ending-btn')?.addEventListener('click', (e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>e.stopPropagation();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>currentScene = 'ending';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function renderSkillTree(app, config) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!playerData) return;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const baseSize = config.font_size || defaultConfig.font_size;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const allSkills = Object.values(skillDatabase).sort((a, b) =&gt; a.level - b.level);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const unlockedSkillIds = getUnlockedSkills().map(s =&gt; s.id);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const tierColors = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>1: '#10b981'</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>};</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>app.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="h-full w-full overflow-auto p-6 fade-in"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>style="background: ${config.background_color || defaultConfig.background_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-family: ${config.font_family || defaultConfig.font_family}, sans-serif;"&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="max-w-md mx-auto space-y-6"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="text-center mb-6"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;h2 class="mb-2" style="font-size: ${baseSize * 2}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ğŸŒ³ ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize}px; opacity: 0.8;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>Lv.${playerData.player_level} - ${unlockedSkillIds.length}å€‹ç¿’å¾—</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="dialogue-box p-5 rounded-3xl slide-up"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex items-center justify-between mb-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h3 style="font-size: ${baseSize * 1.2}px; font-weight: bold; color: ${tierColors[1]};"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>Tier 1</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span style="font-size: ${baseSize * 0.85}px; opacity: 0.7;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>åˆç´šãƒ»åˆ†ææ”»æ’ƒæœŸ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="space-y-3"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>${allSkills.map(skill =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const isUnlocked = unlockedSkillIds.includes(skill.id);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const isAvailable = skill.level &lt;= playerData.player_level;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>return `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="skill-card ${!isUnlocked ? 'locked' : ''} skill-tier-${skill.tier} p-4 rounded-xl"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.surface_color || defaultConfig.surface_color};"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex items-start justify-between mb-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex items-center space-x-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span style="font-size: ${baseSize * 1.5}px;"&gt;${skill.icon}&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h4 style="font-size: ${baseSize}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${skill.name}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/h4&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize * 0.75}px; opacity: 0.6;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>Lv.${skill.level} | ${skill.type === 'empathy' ? 'å…±æ„Ÿ' : skill.type === 'insight' ? 'æ´å¯Ÿ' : 'ãƒªãƒ•ãƒ¬ãƒ¼ãƒ '}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${isUnlocked ? `&lt;span class="sparkle-effect" style="font-size: ${baseSize * 1.2}px;"&gt;âœ¨&lt;/span&gt;` :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>!isAvailable ? `&lt;span style="font-size: ${baseSize}px; opacity: 0.5;"&gt;ğŸ”’&lt;/span&gt;` : ''}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize * 0.85}px; opacity: 0.8; line-height: 1.5; margin-bottom: 0.5rem;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${skill.description}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex items-center justify-between" style="font-size: ${baseSize * 0.8}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span style="color: ${tierColors[skill.tier]};"&gt;âš”ï¸ ${skill.damage}ãƒ€ãƒ¡ãƒ¼ã‚¸&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span style="opacity: 0.7;"&gt;${skill.effect}&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>}).join('')}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;button id="back-btn"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="w-full py-4 px-8 rounded-2xl font-bold"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.primary_action_color || defaultConfig.primary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 1.1}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>æˆ»ã‚‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>`;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>document.getElementById('back-btn').addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>currentScene = 'story-intro';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function renderBattleIntro(app, config) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!currentEnemy) return;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const baseSize = config.font_size || defaultConfig.font_size;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// ãƒãƒˆãƒ«BGMé–‹å§‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>playBattleBgm();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// æ•µã®SVGã‚’ç”Ÿæˆï¼ˆç°¡æ˜“ç‰ˆï¼šçµµæ–‡å­—ã§ä»£ç”¨ï¼‰</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const enemyVisual = currentEnemy.id;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>app.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="h-full w-full flex flex-col items-center justify-center fade-in"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>style="background: ${currentEnemy.background};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-family: ${config.font_family || defaultConfig.font_family}, sans-serif;"&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="w-full text-center space-y-10 px-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="pulse-effect" style="font-size: 140px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>${enemyVisual === 'anxiety' ? 'ğŸŒ‘' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>enemyVisual === 'overwork' ? 'âš™ï¸' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>enemyVisual === 'selfDoubt' ? 'â›“ï¸' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>enemyVisual === 'burnout' ? 'ğŸ”¥' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>enemyVisual === 'conformity' ? 'ğŸ‘¥' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>enemyVisual === 'judgment' ? 'âš–ï¸' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>enemyVisual === 'maze' ? 'ğŸŒ€' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>enemyVisual === 'ideal' ? 'ğŸ’«' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>enemyVisual === 'role' ? 'ğŸ­' : 'ğŸ•³ï¸'}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;h2 class="slide-up"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>style="font-size: ${baseSize * 2.2}px; font-weight: bold; letter-spacing: 2px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>${currentEnemy.name}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/h2&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;p class="slide-up dialogue-box p-6 rounded-2xl mx-auto max-w-md"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  </span>style="font-size: ${baseSize * 1.1}px; animation-delay: 0.3s;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>${currentEnemy.catchphrase}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="slide-up" style="animation-delay: 0.6s;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="text-5xl space-x-6"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span style="animation: pulse 1s infinite;"&gt;âš¡&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span style="animation: pulse 1s infinite; animation-delay: 0.3s;"&gt;âš¡&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span style="animation: pulse 1s infinite; animation-delay: 0.6s;"&gt;âš¡&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>`;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>setTimeout(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>currentScene = 'battle';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}, 3000);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function renderBattleScreen(app, config) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!currentEnemy || !playerData) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>console.error('Battle screen render failed: missing data');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>console.log('Rendering battle screen, isProcessing:', isProcessing);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const baseSize = config.font_size || defaultConfig.font_size;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const hpPercent = (battleState.enemyHp / battleState.enemyMaxHp) * 100;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const currentDialogue = battleState.enemyHp &lt; battleState.enemyMaxHp * 0.3<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>? currentEnemy.dialogue.weak<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>: battleState.turn === 0<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>? currentEnemy.dialogue.intro<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>: currentEnemy.dialogue.attack;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const availableSkills = getAvailableSkillsForBattle();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const tierColors = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>1: '#10b981'</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>};</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// æ•µã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const enemyVisual = currentEnemy.id === 'anxiety' ? 'ğŸŒ‘' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>currentEnemy.id === 'overwork' ? 'âš™ï¸' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>currentEnemy.id === 'selfDoubt' ? 'â›“ï¸' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>currentEnemy.id === 'burnout' ? 'ğŸ”¥' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>currentEnemy.id === 'conformity' ? 'ğŸ‘¥' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>currentEnemy.id === 'judgment' ? 'âš–ï¸' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>currentEnemy.id === 'maze' ? 'ğŸŒ€' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>currentEnemy.id === 'ideal' ? 'ğŸ’«' :<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>currentEnemy.id === 'role' ? 'ğŸ­' : 'ğŸ•³ï¸';</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>app.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="h-full w-full flex flex-col fade-in"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>style="background: ${currentEnemy.background};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-family: ${config.font_family || defaultConfig.font_family}, sans-serif;"&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;!-- ä¸Šéƒ¨ã‚¨ãƒªã‚¢: æ•µæƒ…å ±ï¼ˆ20%ï¼‰ --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="px-4 pt-4 pb-2" style="height: 20%;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="dialogue-box p-4 rounded-2xl h-full flex flex-col justify-center"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex items-center justify-between"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex items-center space-x-3"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div id="enemy-sprite" class="transition-all duration-300" style="font-size: 50px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${enemyVisual}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h3 style="font-size: ${baseSize}px; font-weight: bold; margin-bottom: 0.25rem;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${currentEnemy.name}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex items-center space-x-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span style="font-size: ${baseSize * 0.7}px; opacity: 0.7;"&gt;HP&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex-1" style="width: 120px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="h-1.5 rounded-full overflow-hidden"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: rgba(255, 255, 255, 0.2);"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div id="hp-bar" class="h-full transition-all duration-500"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="width: ${hpPercent}%; background: linear-gradient(90deg, #ef4444, #f59e0b);"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span style="font-size: ${baseSize * 0.7}px; opacity: 0.8;"&gt;${battleState.enemyHp}&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>${battleState.shield &gt; 0 ? `&lt;div style="font-size: ${baseSize * 1.5}px;"&gt;ğŸ›¡ï¸&lt;/div&gt;` : ''}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;!-- ä¸­å¤®ã‚¨ãƒªã‚¢: ã‚»ãƒªãƒ•ï¼‹ä¸»äººå…¬ï¼ˆ35%ï¼‰ --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="px-4 py-2 flex-1" style="height: 35%;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="h-full flex flex-col justify-between space-y-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;!-- ã‚»ãƒªãƒ• --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div id="dialogue-window" class="dialogue-box p-4 rounded-2xl flex items-center justify-center"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize * 0.85}px; line-height: 1.5; font-style: italic; text-align: center;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${currentDialogue}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;!-- ä¸»äººå…¬ --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="dialogue-box p-3 rounded-2xl"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex items-center justify-between"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex items-center space-x-3"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div id="player-sprite" class="transition-all duration-300"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;svg width="60" height="60" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" style="image-rendering: pixelated;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="18" y="8" width="12" height="10" fill="#ffdbac"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="17" y="6" width="14" height="3" fill="#8b5a3c"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="16" y="7" width="2" height="5" fill="#8b5a3c"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="30" y="7" width="2" height="5" fill="#8b5a3c"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="18" y="6" width="12" height="2" fill="#6b4423"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="20" y="12" width="2" height="2" fill="#2d2d2d"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="26" y="12" width="2" height="2" fill="#2d2d2d"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="20" y="13" width="1" height="1" fill="#ffffff"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="26" y="13" width="1" height="1" fill="#ffffff"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="20" y="11" width="2" height="1" fill="#6b4423"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="26" y="11" width="2" height="1" fill="#6b4423"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="22" y="15" width="4" height="1" fill="#2d2d2d"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="21" y="16" width="1" height="1" fill="#2d2d2d"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="26" y="16" width="1" height="1" fill="#2d2d2d"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="21" y="18" width="6" height="2" fill="#ffdbac"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="15" y="20" width="18" height="14" fill="#1a2332"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="21" y="20" width="6" height="12" fill="#ffffff"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="23" y="20" width="2" height="8" fill="#2d5a8f"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="22" y="28" width="1" height="1" fill="#2d5a8f"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="25" y="28" width="1" height="1" fill="#2d5a8f"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="20" y="20" width="1" height="3" fill="#1a2332"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="27" y="20" width="1" height="3" fill="#1a2332"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="19" y="21" width="1" height="2" fill="#1a2332"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="28" y="21" width="1" height="2" fill="#1a2332"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="12" y="22" width="3" height="2" fill="#ffdbac"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="10" y="24" width="4" height="8" fill="#1a2332"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="33" y="22" width="3" height="2" fill="#ffdbac"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="34" y="24" width="4" height="8" fill="#1a2332"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="36" y="28" width="6" height="8" fill="#5c4033"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="37" y="29" width="4" height="6" fill="#6b4423"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="39" y="26" width="1" height="2" fill="#3d2817"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="39" y="31" width="1" height="1" fill="#ffd700"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="23" y="28" width="1" height="1" fill="#cccccc"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="24" y="28" width="1" height="1" fill="#cccccc"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="23" y="31" width="1" height="1" fill="#cccccc"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;rect x="24" y="31" width="1" height="1" fill="#cccccc"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/svg&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div style="font-size: ${baseSize * 0.8}px; font-weight: bold; margin-bottom: 0.25rem;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${playerData.player_name}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex items-center space-x-2" style="font-size: ${baseSize * 0.65}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span&gt;ğŸ˜°${battleState.anxiety}%&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span&gt;âœ¨${battleState.hope}%&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button id="auto-attack-btn"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="px-4 py-2 rounded-full font-bold"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.secondary_action_color || defaultConfig.secondary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 0.75}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>âš¡è‡ªå‹•</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;!-- ä¸‹éƒ¨ã‚¨ãƒªã‚¢: ã‚¹ã‚­ãƒ«ãƒãƒ¼ï¼ˆ45%ï¼‰ --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="px-4 pb-4" style="height: 45%;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="h-full flex flex-col"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="mb-2 px-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize * 0.75}px; opacity: 0.7; text-align: center;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>ã‚¹ã‚­ãƒ«ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ç™ºå‹• ğŸ‘†</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div id="skill-scroll-container" class="flex-1 overflow-x-auto overflow-y-hidden"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex space-x-3 h-full px-2" style="min-width: min-content;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${availableSkills.map((skill, index) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const tierColor = tierColors[skill.tier] || config.primary_action_color;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>return `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button class="skill-card-btn dialogue-box flex-shrink-0 p-4 rounded-2xl transition-all duration-200"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>data-skill-index="${index}"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="width: 160px;<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>border-left: 4px solid ${tierColor};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>background: ${config.surface_color || defaultConfig.surface_color};"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="h-full flex flex-col justify-between"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="text-center mb-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div style="font-size: ${baseSize * 2.5}px; margin-bottom: 0.5rem;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${skill.icon}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h4 style="font-size: ${baseSize * 0.85}px; font-weight: bold; margin-bottom: 0.25rem; color: ${tierColor};"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${skill.name}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/h4&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize * 0.65}px; opacity: 0.7; line-height: 1.3;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${skill.description}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="text-center space-y-1"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div style="font-size: ${baseSize * 0.9}px; font-weight: bold; color: ${tierColor};"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>âš”ï¸ ${skill.damage}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div style="font-size: ${baseSize * 0.6}px; opacity: 0.6;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${skill.effect}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}).join('')}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>`;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>availableSkills.forEach((skill, index) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const btn = document.querySelector(`[data-skill-index="${index}"]`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (btn &amp;&amp; !btn.dataset.listenerAttached) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>btn.dataset.listenerAttached = 'true';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>btn.addEventListener('click', async (e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>e.preventDefault();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>e.stopPropagation();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>console.log('Skill button clicked:', skill.name);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>await executeSkill(skill);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// è‡ªå‹•æ”»æ’ƒãƒœã‚¿ãƒ³</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const autoBtn = document.getElementById('auto-attack-btn');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (autoBtn &amp;&amp; !autoBtn.dataset.listenerAttached) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>autoBtn.dataset.listenerAttached = 'true';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>autoBtn.addEventListener('click', async (e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>e.preventDefault();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>e.stopPropagation();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>console.log('Auto attack button clicked');</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>if (availableSkills.length &gt; 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const randomSkill = availableSkills[Math.floor(Math.random() * availableSkills.length)];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>await executeSkill(randomSkill);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>async function saveBattleResultAndShowResult() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>console.log('Saving battle result...');</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>playDefeatSound();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>} catch (e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>console.warn('Failed to play defeat sound:', e);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const newLevel = Math.min(100, playerData.player_level + 1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const statIncrease = 3;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const battleLog = JSON.parse(playerData.battle_log || '[]');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>battleLog.push({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>enemy: currentEnemy.name,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>level: newLevel,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>date: new Date().toISOString(),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>anxiety: battleState.anxiety,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>hope: battleState.hope</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const result = await window.dataSdk.update({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>...playerData,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>player_level: newLevel,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>empathy: playerData.empathy + statIncrease,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>insight: playerData.insight + statIncrease,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>recovery: playerData.recovery + statIncrease,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>influence: playerData.influence + statIncrease,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>anxiety_level: battleState.anxiety,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>hope_level: battleState.hope,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>confidence_level: Math.min(100, playerData.confidence_level + 10),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>battle_log: JSON.stringify(battleLog)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (result.isOk) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>console.log('Battle result saved successfully');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>console.warn('Failed to save battle result, but continuing...');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>} catch (error) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>console.error('Error saving battle result:', error);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// çµæœç”»é¢ã¸é·ç§»ï¼ˆã‚»ãƒ¼ãƒ–æˆå¦ã«é–¢ã‚ã‚‰ãšï¼‰</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>await new Promise(resolve =&gt; setTimeout(resolve, 1500));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>currentScene = 'result';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>isProcessing = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>async function executeSkill(skill) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (isProcessing) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>console.log('Already processing, skipping...');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>console.log('Starting skill execution:', skill.name);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>isProcessing = true;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// åŠ¹æœéŸ³ã‚’å†ç”Ÿ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>if (skill.soundType === 'attack') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>playAttackSound();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>} else if (skill.soundType === 'magic') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>playMagicSound();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>} else if (skill.soundType === 'defense') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>playDefenseSound();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} catch (audioError) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>console.warn('Audio playback failed:', audioError);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const enemySprite = document.getElementById('enemy-sprite');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const playerSprite = document.getElementById('player-sprite');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const buttons = document.querySelectorAll('.skill-card-btn, #auto-attack-btn');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const dialogue = document.getElementById('dialogue-window');</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// ãƒœã‚¿ãƒ³ã‚’å³åº§ã«ç„¡åŠ¹åŒ–</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>buttons.forEach(btn =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>btn.disabled = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>btn.style.opacity = '0.5';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>btn.style.pointerEvents = 'none';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒæ”»æ’ƒã™ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (playerSprite) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>playerSprite.classList.add('attack-effect');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// æ•µãŒãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’å—ã‘ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (enemySprite) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>setTimeout(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>enemySprite.classList.add('damage-effect');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>}, 200);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>let damage = skill.damage;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>let anxietyChange = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>let hopeChange = 0;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const isWeakness = skill.type === currentEnemy.weakness;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (isWeakness) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>damage = Math.floor(damage * 1.5);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>anxietyChange = -15;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>hopeChange = 15;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>anxietyChange = -5;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>hopeChange = 5;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// ã‚¹ã‚­ãƒ«å›ºæœ‰åŠ¹æœ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (skill.effect &amp;&amp; skill.effect.includes('å›å¾©')) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>hopeChange += 20;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (skill.effect &amp;&amp; (skill.effect.includes('ãƒãƒªã‚¢') || skill.effect.includes('ã‚·ãƒ¼ãƒ«ãƒ‰'))) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>battleState.shield = 30;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (skill.effect &amp;&amp; skill.effect.includes('ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼')) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>battleState.counter = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// ã‚¹ã‚­ãƒ«åŠ¹æœè¡¨ç¤º</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (dialogue) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>const config = getConfig();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>const baseSize = config.font_size || defaultConfig.font_size;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>const tierColors = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>1: '#10b981'</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>};</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>dialogue.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="text-center space-y-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div style="font-size: ${baseSize * 2}px;"&gt;${skill.icon}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize * 1.2}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>${skill.name}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize * 1.5}px; font-weight: bold; color: ${tierColors[skill.tier]};"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>${damage} ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>${isWeakness ? `&lt;p style="font-size: ${baseSize}px; color: #f59e0b;"&gt;âœ¨ å¼±ç‚¹ã‚’ã¤ã„ãŸï¼&lt;/p&gt;` : ''}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>dialogue.classList.add('pulse-effect');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// ã‚¹ãƒ†ãƒ¼ãƒˆæ›´æ–°</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>battleState.enemyHp = Math.max(0, battleState.enemyHp - damage);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>battleState.anxiety = Math.max(0, Math.min(100, battleState.anxiety + anxietyChange));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>battleState.hope = Math.max(0, Math.min(100, battleState.hope + hopeChange));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>battleState.turn++;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>console.log('Battle state updated:', {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>enemyHp: battleState.enemyHp,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>anxiety: battleState.anxiety,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>hope: battleState.hope</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// HPãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const hpBar = document.getElementById('hp-bar');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (hpBar) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>const hpPercent = (battleState.enemyHp / battleState.enemyMaxHp) * 100;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>hpBar.style.width = `${hpPercent}%`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†ã‚’å¾…ã¤</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>await new Promise(resolve =&gt; setTimeout(resolve, 1500));</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (playerSprite) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>playerSprite.classList.remove('attack-effect');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (enemySprite) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>enemySprite.classList.remove('damage-effect');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (dialogue) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>dialogue.classList.remove('pulse-effect');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// å‹åˆ©åˆ¤å®š</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>if (battleState.enemyHp &lt;= 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>console.log('Enemy defeated, saving result...');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>await saveBattleResultAndShowResult();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>return; // å‡¦ç†å®Œäº†å¾Œã¯å³åº§ã«return</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// æ¬¡ã®ã‚¿ãƒ¼ãƒ³ã¸</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>console.log('Continuing to next turn...');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>isProcessing = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>} catch (error) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>console.error('Critical error in executeSkill:', error);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>isProcessing = false;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// ã‚¨ãƒ©ãƒ¼æ™‚ã‚‚ç”»é¢ã‚’å†æç”»ã—ã¦å¾©æ—§ã‚’è©¦ã¿ã‚‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>} catch (renderError) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>console.error('Failed to recover from error:', renderError);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>// æœ€æ‚ªã®å ´åˆã¯ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ç”»é¢ã«æˆ»ã‚‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>currentScene = 'story-intro';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function renderResultScreen(app, config) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!playerData) return;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const baseSize = config.font_size || defaultConfig.font_size;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>// å‹åˆ©BGMå†ç”Ÿ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>playVictoryBgm();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>app.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div id="result-screen" class="h-full w-full flex flex-col items-center justify-center p-8 fade-in cursor-pointer"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>style="background: linear-gradient(180deg, ${config.primary_action_color || defaultConfig.primary_action_color}30 0%, ${config.background_color || defaultConfig.background_color} 100%);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-family: ${config.font_family || defaultConfig.font_family}, sans-serif;"&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="w-full max-w-md text-center space-y-6 pointer-events-none"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="slide-up"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="text-6xl mb-4"&gt;âœ¨&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;h2 style="font-size: ${baseSize * 2}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ç†è§£ã‚’å¾—ãŸ</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="dialogue-box p-6 rounded-3xl slide-up" style="animation-delay: 0.3s;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p class="mb-4" style="font-size: ${baseSize * 1.5}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>Lv.${playerData.player_level - 1} â†’ Lv.${playerData.player_level}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="text-5xl"&gt;â¬†ï¸&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="dialogue-box p-6 rounded-3xl slide-up space-y-4" style="animation-delay: 0.6s;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;h3 style="font-size: ${baseSize * 1.2}px; font-weight: bold;"&gt;æˆé•·ã—ãŸã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="grid grid-cols-2 gap-4" style="font-size: ${baseSize}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="space-y-1"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;å…±æ„Ÿ: ${playerData.empathy - 3} â†’ ${playerData.empathy} ğŸ“ˆ&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;æ´å¯Ÿ: ${playerData.insight - 3} â†’ ${playerData.insight} ğŸ“ˆ&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="space-y-1"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;å›å¾©: ${playerData.recovery - 3} â†’ ${playerData.recovery} ğŸ“ˆ&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;å½±éŸ¿: ${playerData.influence - 3} â†’ ${playerData.influence} ğŸ“ˆ&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="dialogue-box p-6 rounded-3xl slide-up"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>style="animation-delay: 0.9s;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 0.95}px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>line-height: 1.8;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-weight: bold; margin-bottom: 0.5rem;"&gt;å¯¾è©±ãŒåŠ›ã«å¤‰ã‚ã‚‹&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;ã€Œ${currentEnemy.name}ã€ã‚’ç†è§£ã—ãŸã‚ãªãŸã¯ã€&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;æ–°ãŸãªã‚¹ã‚­ãƒ«ã‚’ç¿’å¾—ã—ã€ã•ã‚‰ã«å¼·ããªã£ãŸã€‚&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="slide-up pt-4" style="animation-delay: 1.2s;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize * 0.9}px; opacity: 0.7;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ğŸ‘† ã‚¿ãƒƒãƒ—ã—ã¦ç¶šã‘ã‚‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>`;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>document.getElementById('result-screen').addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>currentEnemy = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>currentScene = 'story-intro';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function renderEmotionLog(app, config) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!playerData) return;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const baseSize = config.font_size || defaultConfig.font_size;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const battleLog = JSON.parse(playerData.battle_log || '[]');</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>app.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="h-full w-full overflow-auto p-8 fade-in"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>style="background: ${config.background_color || defaultConfig.background_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-family: ${config.font_family || defaultConfig.font_family}, sans-serif;"&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="max-w-md mx-auto space-y-6"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="text-center mb-6"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;h2 class="mb-2" style="font-size: ${baseSize * 2}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ğŸ“– æˆé•·ã®è¨˜éŒ²</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize}px; opacity: 0.8;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>${playerData.player_name}ã®æ—…è·¯</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="dialogue-box p-6 rounded-3xl slide-up"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;h3 class="mb-4" style="font-size: ${baseSize * 1.2}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ç¾åœ¨ã®çŠ¶æ…‹ (Lv.${playerData.player_level})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="space-y-3" style="font-size: ${baseSize * 0.9}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex justify-between mb-1"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span&gt;ğŸ˜° ä¸å®‰&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span&gt;${playerData.anxiety_level}%&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="w-full h-2 rounded-full overflow-hidden"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.surface_color || defaultConfig.surface_color};"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="h-full" style="width: ${playerData.anxiety_level}%; background: #ef4444;"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex justify-between mb-1"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span&gt;âœ¨ å¸Œæœ›&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span&gt;${playerData.hope_level}%&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="w-full h-2 rounded-full overflow-hidden"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.surface_color || defaultConfig.surface_color};"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="h-full" style="width: ${playerData.hope_level}%; background: #10b981;"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex justify-between mb-1"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span&gt;ğŸ’ª è‡ªä¿¡&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span&gt;${playerData.confidence_level}%&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="w-full h-2 rounded-full overflow-hidden"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.surface_color || defaultConfig.surface_color};"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="h-full" style="width: ${playerData.confidence_level}%; background: ${config.primary_action_color || defaultConfig.primary_action_color};"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="space-y-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;h3 style="font-size: ${baseSize * 1.2}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>æˆ¦ã„ã®è¨˜éŒ²</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>${battleLog.length === 0 ? `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="dialogue-box p-6 rounded-2xl text-center"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="font-size: ${baseSize * 0.9}px; opacity: 0.7;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>` : battleLog.slice().reverse().map((log, index) =&gt; `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="dialogue-box p-4 rounded-2xl slide-up"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="animation-delay: ${index * 0.1}s;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="flex justify-between items-center mb-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h4 style="font-size: ${baseSize * 1.1}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${log.enemy}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/h4&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span style="font-size: ${baseSize * 0.85}px; opacity: 0.7;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>Lv.${log.level}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="grid grid-cols-2 gap-3" style="font-size: ${baseSize * 0.85}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;ä¸å®‰: ${log.anxiety}%&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;å¸Œæœ›: ${log.hope}%&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p class="mt-2" style="font-size: ${baseSize * 0.75}px; opacity: 0.6;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>${new Date(log.date).toLocaleDateString('ja-JP')}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>`).join('')}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;button id="back-btn"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="w-full py-4 px-8 rounded-2xl font-bold"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.primary_action_color || defaultConfig.primary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 1.1}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>æˆ»ã‚‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>`;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>document.getElementById('back-btn').addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>currentScene = 'story-intro';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>function renderEnding(app, config) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (!playerData) return;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>const baseSize = config.font_size || defaultConfig.font_size;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>let endingType = 'growth';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>let endingTitle = 'æˆé•·ã®ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>let endingMessage = 'ã‚ãªãŸã¯å¤šãã®è‘›è—¤ã¨å‘ãåˆã„ã€ãã‚Œã‚‰ã‚’ç†è§£ã—ãŸã€‚';</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>if (playerData.anxiety_level &lt; 30 &amp;&amp; playerData.hope_level &gt; 70) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>endingType = 'hope';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>endingTitle = 'å¸Œæœ›ã®å¤œæ˜ã‘';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>endingMessage = 'ã‹ã¤ã¦ã®ä¸å®‰ã¯ã€ä»Šã‚„è¡Œå‹•ã¸ã®åŸå‹•åŠ›ã¨ãªã£ãŸã€‚';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>} else if (playerData.confidence_level &gt; 80) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>endingType = 'confidence';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>endingTitle = 'è‡ªä¿¡ã®ç²å¾—';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>endingMessage = 'ã‚ãªãŸã¯è‡ªåˆ†ã®ä¾¡å€¤ã‚’ã€è‡ªåˆ†ã§æ±ºã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>app.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;div class="h-full w-full overflow-auto fade-in"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span>style="background: linear-gradient(180deg, #1a1a3e 0%, ${config.primary_action_color || defaultConfig.primary_action_color}20 50%, ${config.background_color || defaultConfig.background_color} 100%);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-family: ${config.font_family || defaultConfig.font_family}, sans-serif;"&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="min-h-full w-full flex flex-col items-center justify-center p-8 py-12"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;div class="w-full max-w-md text-center space-y-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="text-7xl slide-up"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>${endingType === 'hope' ? 'ğŸŒ…' : endingType === 'confidence' ? 'â­' : 'ğŸŒŸ'}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="slide-up" style="animation-delay: 0.3s;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;h2 class="gradient-text mb-3"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="font-size: ${baseSize * 2.2}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>${endingTitle}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p style="font-size: ${baseSize * 1.1}px; opacity: 0.9;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>Lv.${playerData.player_level} ${playerData.player_name}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="dialogue-box p-8 rounded-3xl slide-up space-y-4"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>style="animation-delay: 0.6s;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 0.95}px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>line-height: 2;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;${endingMessage}&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;ã‚­ãƒ£ãƒªã‚¢ã®æ—…è·¯ã«ã€çµ‚ã‚ã‚Šã¯ãªã„ã€‚&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p&gt;ã—ã‹ã—ä»Šã€ã‚ãªãŸã¯ç¢ºã‹ã«&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;p class="text-center pt-2" style="font-size: ${baseSize * 1.3}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>å‰ã«é€²ã‚€åŠ›ã‚’æŒã£ã¦ã„ã‚‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="dialogue-box p-6 rounded-3xl slide-up"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  </span>style="animation-delay: 0.9s;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;h3 class="mb-4" style="font-size: ${baseSize * 1.2}px; font-weight: bold;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>æœ€çµ‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;div class="grid grid-cols-2 gap-4" style="font-size: ${baseSize}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;å…±æ„Ÿ: ${playerData.empathy}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;æ´å¯Ÿ: ${playerData.insight}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;å›å¾©: ${playerData.recovery}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div&gt;å½±éŸ¿: ${playerData.influence}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div class="space-y-4 slide-up" style="animation-delay: 1.2s;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;button id="log-btn"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="w-full py-4 px-8 rounded-2xl font-bold"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: ${config.primary_action_color || defaultConfig.primary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 1.1}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ğŸ“– æ—…è·¯ã‚’æŒ¯ã‚Šè¿”ã‚‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;button id="title-btn"<span class="Apple-converted-space">Â </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>class="w-full py-3 px-8 rounded-2xl font-bold"</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>style="background: transparent;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>border: 2px solid ${config.secondary_action_color || defaultConfig.secondary_action_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>color: ${config.text_color || defaultConfig.text_color};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>font-size: ${baseSize * 0.95}px;"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ã‚¿ã‚¤ãƒˆãƒ«ã¸æˆ»ã‚‹</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>`;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>document.getElementById('log-btn').addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>currentScene = 'emotion-log';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>document.getElementById('title-btn').addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>currentScene = 'title';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>initializeSDKs().then(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  </span>renderCurrentScene();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  Â  </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â  </span>&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">Â </span>&lt;script&gt;(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b89dcb7f55c3bb3',t:'MTc2NzUyMDU0Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&amp;&amp;(document.onreadystatechange=e,c())}}}})();&lt;/script&gt;&lt;/body&gt;</span></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
